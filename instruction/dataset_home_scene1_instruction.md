# WiFi Sensing - Home_Scene1 数据集说明文档

本文档详细说明了 `Home_Scene1` 数据集的组织结构、文件格式以及使用方法，旨在帮助研究人员快速理解和使用该数据集。

## 1. 项目目标 (Project Goal)

本项目旨在利用 WiFi CSI (Channel State Information) 数据，实现对特定空间（RoomA, RoomB, Livingroom）内**是否有人存在的二分类识别**。这是一个典型的基于无线感知的分类任务。

## 2. 文件夹结构 (Folder Structure)

通过对数据集的实际探查，我们获得了以下这份详细且真实的文件夹结构。

```
Home_Suite1/
├── layout_1/
│   └── 5G_80M/
│       ├── Scene3_RoomA/
│       │   └── ... (包含多种干扰和重复实验)
│       └── Scene3_RoomB/
│           └── ...
├── layout_2/
│   ├── 5G_80M/
│   │   ├── Scene6_RoomA/
│   │   │   └── ...
│   │   └── Scene6_RoomB/
│   │       └── ...
│   └── 5G_160M/
│       ├── Scene5_RoomA/
│       │   └── ...
│       └── Scene5_RoomB/
│           └── ...
└── layout_3/
    └── 5G_80M/
        ├── Scene8_RoomA/
        │   └── ...
        └── Scene8_RoomB/
            └── ...
```

**各层级说明:**

*   `layout_1`, `layout_2`, `layout_3`: 表示三种不同的房间物理布局。
*   `5G_80M` / `5G_160M`: 表示 WiFi 的工作带宽。不同布局下包含的带宽和场景不同：
    *   **Layout 1**: 仅 `5G_80M` (Scene3)。
    *   **Layout 2**: `5G_80M` (Scene6) 和 `5G_160M` (Scene5)。
    *   **Layout 3**: 仅 `5G_80M` (Scene8)。
*   `Scene3_RoomA`, `Scene6_RoomB`, etc.: 表示接收设备（RX）所在的房间和对应的场景编号。
*   最底层文件夹 (e.g., `2to2_Scene3_GreenPlantFan_1`): **实验数据文件夹**，其命名规则解析如下：
    *   `2to2`: 表示天线配置为 2个发射天线(TX) 和 2个接收天线(RX)，即 2x2 MIMO。
    *   `Scene*`: 实验场景的唯一编号。
    *   `GreenPlantFan`: 该次实验中设置的**干扰类型**。已观察到的干扰类型包括 `NoInterference` (无干扰) 和 `RobotVacuum` (扫地机器人)。
    *   `_1`, `_2`, `_3`: 表示在相同设置下的**重复实验标次**。每个场景均重复了3次。

## 3. 文件内容说明 (File Content Description)

在每个实验数据文件夹（例如 `2to2_Scene3_GreenPlantFan_1/`）内部，数据和标签被分别存放在各自的子文件夹中。

```
2to2_Scene3_GreenPlantFan_1/
├── LivingRoomGroundtruth/
│   └── ... (存放标签文件, e.g., 1101_01.txt)
├── RoomAData/
│   ├── 1101_01.txt
│   ├── 1101_02.txt
│   └── 1101_03.txt
└── RoomAGroundtruth/
    └── ... (存放标签文件)
```

**关键说明:**

*   **子文件夹**: 数据和标签没有直接放在实验文件夹下，而是分别放在 `*Data` 和 `*Groundtruth` 子目录中。
*   **数据文件**: 原始的CSI数据是以 `.txt` 文件的形式存放在 `*Data` 文件夹内。
*   **文件名**: 文件名（如 `1101_01`）可能代表采集的日期和批次，这需要参照官方文档来确认。

### 3.1. 数据文件 (`*Data/*.txt`)

每个 `.txt` 数据文件为文本格式，每行代表一个WiFi数据包 (packet)。

#### **5G_80M 带宽格式**

每行包含 1008 个由空格分隔的数据点。

*   **数据帧格式**: `Timestamp(3) RSSI(2) MCS(1) Gain(2) CSI(4*250)`
*   **字段说明**:
    *   `Timestamp`: 3个数据，分别是 `时`, `分`, `秒`。
    *   `RSSI`: 2个数据，2根天线的接收信号强度指示。
    *   `MCS`: 1个数据，调制与编码策略。
    *   `Gain`: 2个数据，增益信息。
    *   `CSI`: **1000个数据 (4 x 250)**，表示信道状态信息。
        *   `Tx1-Rx1`: 前 250 个数据。
        *   `Tx1-Rx2`: 第 251-500 个数据。
        *   `Tx2-Rx1`: 第 501-750 个数据。
        *   `Tx2-Rx2`: 第 751-1000 个数据。

#### **5G_160M 带宽格式**

每行包含 1008 个由空格分隔的数据点。

*   **数据帧格式**: `Timestamp(3) RSSI(2) MCS(1) Gain(2) CSI(4*248)`
*   **字段说明**:
    *   除CSI外，其他字段与80M带宽格式相同。
    *   `CSI`: **992个数据 (4 x 248)**，由于带宽变化，每个信道的子载波数为248。
        *   `Tx1-Rx1`: 前 248 个数据。
        *   `Tx1-Rx2`: 第 249-496 个数据。
        *   `Tx2-Rx1`: 第 497-744 个数据。
        *   `Tx2-Rx2`: 第 745-992 个数据。

### 3.2. 标签文件 (`*Groundtruth/*.txt`)

标签文件 (`.txt` 格式) 内存放由空格分隔的 `0` 或 `1`。

*   `0`: 代表该时间段内，对应房间**无人**。
*   `1`: 代表该时间段内，对应房间**有人**。

## 4. 数据处理与样本生成 (Data Processing & Sample Generation)

本项目的核心是将来自多个接收器（RoomA, RoomB）的数据进行**融合**，以共同预测多个空间（RoomA, RoomB, LivingRoom）的状态。一个训练样本的生成遵循以下“**融合模型**”流程：

### 4.1. 数据与标签的对应关系

对应关系的基本单元是**一个完整的实验组**（即一个 `2to2_*` 文件夹下的所有 `.txt` 文件）。在每个实验组内部，对应关系基于**2秒的时间窗口**。

对于**任何一个2秒的时间窗口**（例如，第50个窗口，时间范围 `98s-100s`）：

*   **输入 (Input)**:
    1.  系统会**同时**从 `RoomAData` 和 `RoomBData` 文件中，筛选出所有时间戳落在这个2秒窗口内的数据包。
    2.  这两组数据包会被各自**补零或截断**，以符合在 `config.yml` 中设定的 `max_sequence_length` (例如 `70`)。
    3.  最终，这两个 `(70, 1008)` 的数据块会被**堆叠**起来，形成一个 `(2, 70, 1008)` 的三维张量，作为模型的**单一输入**。这里的 `2` 代表了 RoomA 和 RoomB 两个“通道”。

*   **标签 (Label)**:
    1.  系统会**同时**从 `RoomAGroundtruth`, `RoomBGroundtruth`, 和 `LivingRoomGroundtruth` 这三个文件中，分别取出**第50个**标签值。
    2.  这三个值（例如 `1`, `0`, `0`）会被组合成一个 `[1, 0, 0]` 的三维向量，作为模型的**目标输出**。

**总结**: 对应关系为 **(融合后的多通道CSI数据) -> (多房间状态的标签向量)**。

## 5. 文件名解析 (Filename Convention)

在实验数据文件夹内，`.txt` 文件名（如 `1101_01.txt` 或 `groundtruth_1111_01.txt`）也包含了丰富的元数据。以 `1101_01` 为例：

`1` `1` `0` `1` `_` `01`

*   **第一位数字 (e.g., `1`)**: 未知，可能与场景或布局相关。
*   **第二位数字 (e.g., `1`)**: **带宽**
    *   `1`: 5G_80M
    *   `2`: 5G_160M
*   **第三位数字 (e.g., `0`)**: **房间**
    *   `0`: RoomA
    *   `1`: RoomB
    *   `2`: LivingRoom
*   **第四位数字 (e.g., `1`)**: **干扰类型**
    *   `0`: NoInterference
    *   `1`: GreenPlantFan
    *   `2`: RobotVacuum
*   **下划线后两位 (e.g., `01`)**: 用于区分同一批次的**实验标次**。

理解这些命名规则对于自动化数据处理至关重要。 